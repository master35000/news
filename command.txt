python manage.py makemigrations
python manage.py migrate
python manage.py shell
from news.models import *
from news.resources import *
user1 = User.objects.create_user(username = 'master')
user2 = User.objects.create_user(username = 'daster')
Author.objects.create(user = user1)
Author.objects.create(user = user2)
Category.objects.create(name = 'Sport')
Category.objects.create(name = 'Business')
Category.objects.create(name = 'Science')
Category.objects.create(name = 'Rest')
author=Author.objects.get(user_id=1)
Post.objects.create(author = author, post_type = 'AR', title = 'Дебют Немкова в тяжах', text = '24 февраля состоится турнир PFL vs Bellator: Champs, в главном событии которого Ренан Феррейра встретится с Райаном Бейдером. В карде пройдет еще один поединок действующих чемпионов обеих лиг — Импа Касанганай сразится с Джонни Эбленом. Кроме того, оставивший чемпионский пояс Bellator в полутяжелом дивизионе россиянин Вадим Немков дебютирует в тяжелом весе и подерется с экс-чемпионом PFL Бруно Капелоццой.   Всего в карде турнира ПФЛ против Bellator значатся 12 боев, 7 из них — в основном. Немков — единственный российский участник вечера ММА. В России противостояние чемпионов ПФЛ с чемпионами Bellator в полном объеме покажет онлайн-кинотеатр Okko — присоединяйтесь к просмотру.', rating =1)
Post.objects.get(id=1).pcategory.add(Category.objects.get(id=1))
Post.objects.create(author = author, post_type = 'AR', title = 'Aurus попал под новые санкции США', text = 'Под новые санкции США попал российский бренд люксовых автомобилей Aurus, следует из списка, который опубликовало Управление по контролю за иностранными активами (OFAC, Office of Foreign Assets Control) американского Минфина.', rating =2)
Post.objects.get(id=2).pcategory.add(Category.objects.get(id=2))
author=Author.objects.get(user_id=2)
Post.objects.create(author = author, post_type = 'NE', title = 'В Турцию в январе приехало меньше россиян, чем в прошлом году', text='Министерство туризма Турции привело статистику по числу туристов за январь. Согласно этим данным, по этому показателю по-прежнему лидируют россияне – 230 тыс. человек. На втором месте туристы из Ирана – 211 тыс. человек, а замыкает тройку лидеров Болгария – 162 тыс. человек.', rating = 5)
Post.objects.get(id=3).pcategory.add(Category.objects.get(id=4))
Post.objects.get(id=3).pcategory.add(Category.objects.get(id=2))
Comment.objects.create(post=Post.objects.get(id=1), user=Author.objects.get(user_id=1).user, text = 'Хорошая публикацмя')
Comment.objects.create(post=Post.objects.get(id=2), user=Author.objects.get(user_id=2).user, text = 'Могло бы быть лучше')
Comment.objects.create(post=Post.objects.get(id=3), user=Author.objects.get(user_id=2).user, text = 'Отлично написано')
Comment.objects.create(post=Post.objects.get(id=3), user=Author.objects.get(user_id=1).user, text = 'Супер новость')
Comment.objects.get(id=1).like()
Comment.objects.get(id=2).like()
Comment.objects.get(id=1).like()
Comment.objects.get(id=1).like()
Comment.objects.get(id=2).dislike()
Comment.objects.get(id=2).like()
Comment.objects.get(id=2).dislike()
Comment.objects.get(id=2).dislike()
Comment.objects.get(id=2).dislike()
Post.objects.get(id=1).like()
Post.objects.get(id=1).like()
Post.objects.get(id=2).like()
Post.objects.get(id=2).dislike()
Post.objects.get(id=3).like()
Author.objects.get(user_id=1).update_rating()
Author.objects.get(user_id=2).update_rating()
Author.objects.order_by('-rating')[:1].values('user__username', 'rating')
Post.objects.order_by('-rating')[:1].values('datetime_in','author__user__username', 'rating', 'title')
Post.objects.order_by('-rating')[0].preview()
Post.objects.order_by('-rating')[0].comment_set.all().values('datetime_in','user__username', 'rating', 'text')